import React, { useEffect, useState } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { useAuth } from './AuthContext';
import api from './api';
import HostWrapper from './HostWrapper';

function PrivacyType({ onSaveAndExit, onNext, onBack, isSaving, hostId, onPrivacyTypeChange, progress, setProgress }) {
    const { isAuthenticated } = useAuth();
    const navigate = useNavigate();
    const location = useLocation();
    if (!isAuthenticated) return null;

    const svgs = {
        entire: '<svg id="l_d_8179" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 35 35" width="35" height="35" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs id="l_d_8180"><clipPath id="__lottie_element_3701"><rect id="l_d_8183" width="35" height="35" x="0" y="0"></rect></clipPath><g id="__lottie_element_3709"><g id="l_d_8196" transform="matrix(1,0,0,1,8.5,13.99799919128418)" opacity="1" style="display: block;"><path id="l_d_8201" fill="rgb(255,0,0)" fill-opacity="1" d=" M5,17 C5,17 5,5.99 5,5.99 C5,5.44 5.44,5 5.99,5 C5.99,5 12,5 12,5 C12.11,5 12.21,5.02 12.3,5.04 C12.7,5.17 12.99,5.55 12.99,5.99 C12.99,5.99 12.99,17 12.99,17"></path><g id="l_d_8202" opacity="1" transform="matrix(1,0,0,1,8.996000289916992,10.998000144958496)"><path id="l_d_8203" stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-3.996000051498413,5.999000072479248 C-3.996000051498413,5.999000072479248 -3.996000051498413,-5.007999897003174 -3.996000051498413,-5.007999897003174 C-3.996000051498413,-5.554999828338623 -3.552999973297119,-5.999000072479248 -3.006999969482422,-5.999000072479248 C-3.006999969482422,-5.999000072479248 3.006999969482422,-5.999000072479248 3.006999969482422,-5.999000072479248 C3.109999895095825,-5.999000072479248 3.2090001106262207,-5.982999801635742 3.302000045776367,-5.953999996185303 C3.7039999961853027,-5.828999996185303 3.996000051498413,-5.452000141143799 3.996000051498413,-5.007999897003174 C3.996000051498413,-5.007999897003174 3.996000051498413,5.999000072479248 3.996000051498413,5.999000072479248"></path></g></g></g><filter id="__lottie_element_3715" filterUnits="objectBoundingBox" x="0%" y="0%" width="100%" height="100%"><feComponentTransfer id="l_d_8213" in="SourceGraphic"><feFuncA id="l_d_8214" type="table" tableValues="1.0 0.0"></feFuncA></feComponentTransfer></filter><mask id="__lottie_element_3709_2" mask-type="alpha"><g id="l_d_8211" filter="url(#__lottie_element_3715)"><rect id="l_d_8215" width="35" height="35" x="0" y="0" fill="#ffffff" opacity="0"></rect><use id="l_d_8216" xlink:href="#__lottie_element_3709"></use></g></mask></defs><g id="l_d_8181" clip-path="url(#__lottie_element_3701)"><g id="l_d_8217" transform="matrix(1,0,0,1,1.5069999694824219,9.33899974822998)" opacity="1" style="display: block;"><g id="l_d_8221" opacity="1" transform="matrix(1,0,0,1,15.994999885559082,13.32800006866455)"><path id="l_d_8222" stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-10.994999885559082,-8.32800006866455 C-10.994999885559082,-8.32800006866455 -10.994999885559082,7.440000057220459 -10.994999885559082,7.440000057220459 C-10.994999885559082,7.929999828338623 -10.597000122070312,8.32800006866455 -10.107000350952148,8.32800006866455 C-10.107000350952148,8.32800006866455 10.107000350952148,8.32800006866455 10.107000350952148,8.32800006866455 C10.597999572753906,8.32800006866455 10.994999885559082,7.929999828338623 10.994999885559082,7.440000057220459 C10.994999885559082,7.440000057220459 10.994999885559082,-8.32800006866455 10.994999885559082,-8.32800006866455"></path></g></g><g id="l_d_8205" mask="url(#__lottie_element_3709_2)" style="display: block;"><g id="l_d_8204" transform="matrix(1,0,0,1,8.5,13.99799919128418)" opacity="1"><g id="l_d_8208" opacity="1" transform="matrix(1,0,0,1,8.996000289916992,10.998000144958496)"><path id="l_d_8209" stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-0.7570000290870667,-5.999000072479248 C-0.7570000290870667,-5.999000072479248 3.006999969482422,-5.999000072479248 3.006999969482422,-5.999000072479248 C3.109999895095825,-5.999000072479248 3.2090001106262207,-5.982999801635742 3.302000045776367,-5.953999996185303 C3.7039999961853027,-5.828999996185303 3.996000051498413,-5.452000141143799 3.996000051498413,-5.007999897003174 C3.996000051498413,-5.007999897003174 3.996000051498413,5.999000072479248 3.996000051498413,5.999000072479248"></path></g></g></g><g id="l_d_8190" transform="matrix(1,0,0,1,8.5,13.99799919128418)" opacity="1" style="display: block;"><g id="l_d_8194" opacity="1" transform="matrix(1,0,0,1,8.996000289916992,10.998000144958496)"><path id="l_d_8195" stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-3.996000051498413,5.999000072479248 C-3.996000051498413,5.999000072479248 -3.996000051498413,-5.007999897003174 -3.996000051498413,-5.007999897003174 C-3.996000051498413,-5.554999828338623 -3.552999973297119,-5.999000072479248 -3.006999969482422,-5.999000072479248 C-3.006999969482422,-5.999000072479248 3.006999969482422,-5.999000072479248 3.006999969482422,-5.999000072479248 C3.109999895095825,-5.999000072479248 3.2090001106262207,-5.982999801635742 3.302000045776367,-5.953999996185303 C3.7039999961853027,-5.828999996185303 3.996000051498413,-5.452000141143799 3.996000051498413,-5.007999897003174 C3.996000051498413,-5.007999897003174 3.996000051498413,5.999000072479248 3.996000051498413,5.999000072479248"></path></g></g><g id="l_d_8184" transform="matrix(1,0,0,1,-2,-1.128000259399414)" opacity="1" style="display: block;"><g id="l_d_8188" opacity="1" transform="matrix(1,0,0,1,19.5,11.814000129699707)"><path id="l_d_8189" stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-14.5,6.814000129699707 C-14.5,6.814000129699707 -1.496999979019165,-5.997000217437744 -1.496999979019165,-5.997000217437744 C-0.6669999957084656,-6.815000057220459 0.6650000214576721,-6.815000057220459 1.4950000047683716,-5.997000217437744 C1.4950000047683716,-5.997000217437744 14.5,6.814000129699707 14.5,6.814000129699707"></path></g></g></g></svg>',
        room: '<svg id="l_d_8224" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 35 35" width="35" height="35" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs id="l_d_8225"><clipPath id="__lottie_element_3720"><rect id="l_d_8228" width="35" height="35" x="0" y="0"></rect></clipPath><g id="__lottie_element_3725"><g id="l_d_8237" transform="matrix(1,0,0,1,2.6220006942749023,-0.2480010986328125)" opacity="1" style="display: block;"><path id="l_d_8242" fill="rgb(255,0,0)" fill-opacity="1" d=" M5,32 C5,32 5,5.96 5,5.96 C5,5.43 5.43,5 5.96,5 C5.96,5 20.05,5 20.05,5 C20.58,5 21.01,5.43 21.01,5.96 C21.01,5.96 21.01,32 21.01,32 M18,19 C18,19.55 17.56,20 17,20 C16.45,20 16,19.55 16,19 C16,18.45 16.45,18 17,18 C17.56,18 18,18.45 18,19z"></path><g id="l_d_8243" opacity="1" transform="matrix(1,0,0,1,13.005000114440918,18.499000549316406)"><path id="l_d_8244" stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-8.005000114440918,13.49899959564209 C-8.005000114440918,13.49899959564209 -8.005000114440918,-12.543000221252441 -8.005000114440918,-12.543000221252441 C-8.005000114440918,-13.071000099182129 -7.577000141143799,-13.49899959564209 -7.047999858856201,-13.49899959564209 C-7.047999858856201,-13.49899959564209 7.048999786376953,-13.49899959564209 7.048999786376953,-13.49899959564209 C7.577000141143799,-13.49899959564209 8.005000114440918,-13.071000099182129 8.005000114440918,-12.543000221252441 C8.005000114440918,-12.543000221252441 8.005000114440918,13.49899959564209 8.005000114440918,13.49899959564209"></path></g><g id="l_d_8245" opacity="1" transform="matrix(1,0,0,1,17.003000259399414,18.99799919128418)"><path id="l_d_8246" fill="rgb(34,34,34)" fill-opacity="1" d=" M1,0 C1,0.5519999861717224 0.5519999861717224,1 0,1 C-0.5519999861717224,1 -1,0.5519999861717224 -1,0 C-1,-0.5519999861717224 -0.5519999861717224,-1 0,-1 C0.5519999861717224,-1 1,-0.5519999861717224 1,0z"></path></g></g></g><filter id="__lottie_element_3731" filterUnits="objectBoundingBox" x="0%" y="0%" width="100%" height="100%"><feComponentTransfer id="l_d_8256" in="SourceGraphic"><feFuncA id="l_d_8257" type="table" tableValues="1.0 0.0"></feFuncA></feComponentTransfer></filter><mask id="__lottie_element_3725_2" mask-type="alpha"><g id="l_d_8254" filter="url(#__lottie_element_3731)"><rect id="l_d_8258" width="35" height="35" x="0" y="0" fill="#ffffff" opacity="0"></rect><use id="l_d_8259" xlink:href="#__lottie_element_3725"></use></g></mask></defs><g id="l_d_8226" clip-path="url(#__lottie_element_3720)"><g id="l_d_8266" transform="matrix(1,0,0,1,17.75,18.75)" opacity="1" style="display: block;"><g id="l_d_8270" opacity="1" transform="matrix(1,0,0,1,0,0)"><path id="l_d_8271" stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M5.875,-13 C5.875,-13 5.875,13.281000137329102 5.875,13.281000137329102"></path></g></g><g id="l_d_8260" transform="matrix(1,0,0,1,3.625,31.749000549316406)" opacity="1" style="display: block;"><g id="l_d_8264" opacity="1" transform="matrix(1,0,0,1,0,0)"><path id="l_d_8265" stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M1,1 C1,1 27,1 27,1"></path></g></g><g id="l_d_8248" mask="url(#__lottie_element_3725_2)" style="display: block;"><g id="l_d_8247" transform="matrix(1,0,0,1,2.6220006942749023,-0.2480010986328125)" opacity="1"><g id="l_d_8251" opacity="1" transform="matrix(1,0,0,1,14.979999542236328,18.499000549316406)"><path id="l_d_8252" stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-9.979999542236328,13.49899959564209 C-9.979999542236328,13.49899959564209 -9.979999542236328,-12.543000221252441 -9.979999542236328,-12.543000221252441 C-9.979999542236328,-13.071000099182129 -9.552000045776367,-13.49899959564209 -9.02299976348877,-13.49899959564209 C-9.02299976348877,-13.49899959564209 9.02299976348877,-13.49899959564209 9.02299976348877,-13.49899959564209 C9.550999641418457,-13.49899959564209 9.979999542236328,-13.071000099182129 9.979999542236328,-12.543000221252441 C9.979999542236328,-12.543000221252441 9.979999542236328,13.49899959564209 9.979999542236328,13.49899959564209"></path></g></g></g><g id="l_d_8229" transform="matrix(1,0,0,1,2.6220006942749023,-0.2480010986328125)" opacity="1" style="display: block;"><g id="l_d_8233" opacity="1" transform="matrix(1,0,0,1,13.005000114440918,18.499000549316406)"><path id="l_d_8234" stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-8.005000114440918,13.49899959564209 C-8.005000114440918,13.49899959564209 -8.005000114440918,-12.543000221252441 -8.005000114440918,-12.543000221252441 C-8.005000114440918,-13.071000099182129 -7.577000141143799,-13.49899959564209 -7.047999858856201,-13.49899959564209 C-7.047999858856201,-13.49899959564209 7.048999786376953,-13.49899959564209 7.048999786376953,-13.49899959564209 C7.577000141143799,-13.49899959564209 8.005000114440918,-13.071000099182129 8.005000114440918,-12.543000221252441 C8.005000114440918,-12.543000221252441 8.005000114440918,13.49899959564209 8.005000114440918,13.49899959564209"></path></g><g id="l_d_8235" opacity="1" transform="matrix(1,0,0,1,17.003000259399414,18.99799919128418)"><path id="l_d_8236" fill="rgb(34,34,34)" fill-opacity="1" d=" M1,0 C1,0.5519999861717224 0.5519999861717224,1 0,1 C-0.5519999861717224,1 -1,0.5519999861717224 -1,0 C-1,-0.5519999861717224 -0.5519999861717224,-1 0,-1 C0.5519999861717224,-1 1,-0.5519999861717224 1,0z"></path></g></g></g></svg>',
        shared: '<svg id="l_d_8273" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 35 35" width="35" height="35" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs id="l_d_8274"><clipPath id="__lottie_element_3739"><rect id="l_d_8277" width="35" height="35" x="0" y="0"></rect></clipPath><g id="__lottie_element_3741"><g id="l_d_8278" transform="matrix(1,0,0,1,-0.6140003204345703,-0.5790004730224609)" opacity="1" style="display: block;"><g id="l_d_8283" opacity="1" transform="matrix(1,0,0,1,18.000999450683594,18.04400062561035)"><path id="l_d_8284" stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-13.00100040435791,-2.5169999599456787 C-13.00100040435791,-2.5169999599456787 -13.010000228881836,11.147000312805176 -13.010000228881836,11.147000312805176 C-13.010000228881836,11.711000442504883 -12.553000450134277,12.168999671936035 -11.98799991607666,12.168999671936035 C-11.98799991607666,12.168999671936035 11.970999717712402,12.168999671936035 11.970999717712402,12.168999671936035 C12.53499984741211,12.168999671936035 12.991999626159668,11.711000442504883 12.991999626159668,11.147000312805176 C12.991999626159668,11.147000312805176 13.00100040435791,-2.5350000858306885 13.00100040435791,-2.5350000858306885 C13.00100040435791,-2.809000015258789 12.876999855041504,-3.068000078201294 12.663999557495117,-3.239000082015991 C12.663999557495117,-3.239000082015991 1.2120000123977661,-12.45199966430664 1.2120000123977661,-12.45199966430664 C0.47600001096725464,-13.043999671936035 -0.574999988079071,-13.041999816894531 -1.309000015258789,-12.446000099182129 C-1.309000015258789,-12.446000099182129 -12.666999816894531,-3.2190001010894775 -12.666999816894531,-3.2190001010894775 C-12.878000259399414,-3.046999931335449 -13.00100040435791,-2.7890000343322754 -13.00100040435791,-2.5169999599456787z"></path><path id="l_d_8285" fill="rgb(255,0,0)" fill-opacity="1" d=" M-13.00100040435791,-2.5169999599456787 C-13.00100040435791,-2.5169999599456787 -13.010000228881836,11.147000312805176 -13.010000228881836,11.147000312805176 C-13.010000228881836,11.711000442504883 -12.553000450134277,12.168999671936035 -11.98799991607666,12.168999671936035 C-11.98799991607666,12.168999671936035 11.970999717712402,12.168999671936035 11.970999717712402,12.168999671936035 C12.53499984741211,12.168999671936035 12.991999626159668,11.711000442504883 12.991999626159668,11.147000312805176 C12.991999626159668,11.147000312805176 13.00100040435791,-2.5350000858306885 13.00100040435791,-2.5350000858306885 C13.00100040435791,-2.809000015258789 12.876999855041504,-3.068000078201294 12.663999557495117,-3.239000082015991 C12.663999557495117,-3.239000082015991 1.2120000123977661,-12.45199966430664 1.2120000123977661,-12.45199966430664 C0.47600001096725464,-13.043999671936035 -0.574999988079071,-13.041999816894531 -1.309000015258789,-12.446000099182129 C-1.309000015258789,-12.446000099182129 -12.666999816894531,-3.2190001010894775 -12.666999816894531,-3.2190001010894775 C-12.878000259399414,-3.046999931335449 -13.00100040435791,-2.7890000343322754 -13.00100040435791,-2.5169999599456787z"></path></g></g></g><clipPath id="__lottie_element_3745"><path id="l_d_8289" d="M0,0 L80,0 L80,80 L0,80z"></path></clipPath><g id="__lottie_element_3752"><g id="l_d_8298" transform="matrix(1,0,0,1,26.000001907348633,25.876001358032227)" opacity="1" style="display: block;"><g id="l_d_8303" opacity="1" transform="matrix(1,0,0,1,19.663000106811523,21.152000427246094)"><path id="l_d_8304" fill="rgb(241,0,0)" fill-opacity="1" d=" M2.9600000381469727,-0.8069999814033508 C3.5989999771118164,-1.5160000324249268 4,-2.444999933242798 4,-3.4730000495910645 C4,-5.678999900817871 2.2060000896453857,-7.4730000495910645 0,-7.4730000495910645 C-2.2060000896453857,-7.4730000495910645 -4,-5.678999900817871 -4,-3.4730000495910645 C-4,-2.444999933242798 -3.5999999046325684,-1.5160000324249268 -2.9609999656677246,-0.8069999814033508 C-5.3429999351501465,0.3109999895095825 -7,2.7260000705718994 -7,5.5269999504089355 C-7,5.5269999504089355 -7,7.5269999504089355 -7,7.5269999504089355 C-7,7.5269999504089355 -5,7.5269999504089355 -5,7.5269999504089355 C-5,7.5269999504089355 0.25,9.027000427246094 0.25,9.027000427246094 C0.25,6.611000061035156 1.5980000495910645,9.59000015258789 3.880000114440918,9.128000259399414 C3.880000114440918,9.128000259399414 5.630000114440918,4.874000072479248 5.630000114440918,4.874000072479248 C5.0329999923706055,4.5279998779296875 -1.9989999532699585,-2.734999895095825 -1.9989999532699585,-3.4749999046325684 C-1.9989999532699585,-4.578999996185303 -1.1039999723434448,-5.473999977111816 0,-5.473999977111816 C1.1030000448226929,-5.473999977111816 1.9980000257492065,-4.578999996185303 1.9980000257492065,-3.4749999046325684 C1.9980000257492065,-2.740000009536743 1.5959999561309814,-2.1040000915527344 1.0049999952316284,-1.7569999694824219 C1.0049999952316284,-1.7569999694824219 1.0049999952316284,0.6290000081062317 1.0049999952316284,0.6290000081062317 C3.2820000648498535,1.0950000286102295 5,3.114000082015991 5,5.5269999504089355 C5,5.5269999504089355 5,7.5269999504089355 5,7.5269999504089355 C5,7.5269999504089355 7,7.5269999504089355 7,7.5269999504089355 C7,7.5269999504089355 7,5.5269999504089355 7,5.5269999504089355 C7,2.7260000705718994 5.3420000076293945,0.3109999895095825 2.9600000381469727,-0.8069999814033508z"></path></g></g></g><filter id="__lottie_element_3759" filterUnits="objectBoundingBox" x="0%" y="0%" width="100%" height="100%"><feComponentTransfer id="l_d_8314" in="SourceGraphic"><feFuncA id="l_d_8315" type="table" tableValues="1.0 0.0"></feFuncA></feComponentTransfer></filter><mask id="__lottie_element_3752_2" mask-type="alpha"><g id="l_d_8312" filter="url(#__lottie_element_3759)"><rect id="l_d_8316" width="80" height="80" x="0" y="0" fill="#ffffff" opacity="0"></rect><use id="l_d_8317" xlink:href="#__lottie_element_3752"></use></g></mask><mask id="__lottie_element_3741_1" mask-type="alpha"><use id="l_d_8319" xlink:href="#__lottie_element_3741"></use></mask></defs><g id="l_d_8275" clip-path="url(#__lottie_element_3739)"><g id="l_d_8320" transform="matrix(1,0,0,1,-0.6140003204345703,-0.5790004730224609)" opacity="1" style="display: block;"><g id="l_d_8324" opacity="1" transform="matrix(1,0,0,1,18.000999450683594,18.04400062561035)"><path id="l_d_8325" stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" stroke="rgb(34,34,34)" stroke-opacity="1" stroke-width="2" d=" M-13.00100040435791,-2.5169999599456787 C-13.00100040435791,-2.5169999599456787 -13.00100040435791,12.022000312805176 -13.00100040435791,12.022000312805176 C-13.00100040435791,12.586000442504883 -12.543999671936035,13.043999671936035 -11.979000091552734,13.043999671936035 C-11.979000091552734,13.043999671936035 11.979999542236328,13.043999671936035 11.979999542236328,13.043999671936035 C12.543999671936035,13.043999671936035 13.00100040435791,12.586000442504883 13.00100040435791,12.022000312805176 C13.00100040435791,12.022000312805176 13.00100040435791,-2.5350000858306885 13.00100040435791,-2.5350000858306885 C13.00100040435791,-2.809000015258789 12.876999855041504,-3.068000078201294 12.663999557495117,-3.239000082015991 C12.663999557495117,-3.239000082015991 1.2120000123977661,-12.45199966430664 1.2120000123977661,-12.45199966430664 C0.47600001096725464,-13.043999671936035 -0.574999988079071,-13.041999816894531 -1.309000015258789,-12.446000099182129 C-1.309000015258789,-12.446000099182129 -12.666999816894531,-3.2190001010894775 -12.666999816894531,-3.2190001010894775 C-12.878000259399414,-3.046999931335449 -13.00100040435791,-2.7890000343322754 -13.00100040435791,-2.5169999599456787z"></path></g></g><g id="l_d_8287" mask="url(#__lottie_element_3741_1)" style="display: block;"><g id="l_d_8286" clip-path="url(#__lottie_element_3745)" transform="matrix(1,0,0,1,-22.625,-22.5)" opacity="1"><g id="l_d_8306" mask="url(#__lottie_element_3752_2)" style="display: block;"><g id="l_d_8305" transform="matrix(1,0,0,1,26,25.876001358032227)" opacity="1"><g id="l_d_8309" opacity="1" transform="matrix(1,0,0,1,8.440999984741211,21.152000427246094)"><path id="l_d_8310" fill="rgb(34,34,34)" fill-opacity="1" d=" M2.9600000381469727,-0.8069999814033508 C3.5989999771118164,-1.5160000324249268 4,-2.444999933242798 4,-3.4730000495910645 C4,-5.678999900817871 2.2060000896453857,-7.4730000495910645 0,-7.4730000495910645 C-2.2060000896453857,-7.4730000495910645 -4,-5.678999900817871 -4,-3.4730000495910645 C-4,-2.444999933242798 -3.5999999046325684,-1.5160000324249268 -2.9609999656677246,-0.8069999814033508 C-5.3429999351501465,0.3109999895095825 -7,2.7260000705718994 -7,5.5269999504089355 C-7,5.5269999504089355 -7,7.5269999504089355 -7,7.5269999504089355 C-7,7.5269999504089355 -5,7.5269999504089355 -5,7.5269999504089355 C-5,7.5269999504089355 -5,5.5269999504089355 -5,5.5269999504089355 C-5,3.1110000610351562 -3.2769999504089355,1.090000033378601 -0.9950000047683716,0.628000020980835 C-0.9950000047683716,0.628000020980835 -0.9950000047683716,-1.7510000467300415 -0.9950000047683716,-1.7510000467300415 C-1.5920000076293945,-2.0969998836517334 -1.9989999532699585,-2.734999895095825 -1.9989999532699585,-3.4749999046325684 C-1.9989999532699585,-4.578999996185303 -1.1039999723434448,-5.473999977111816 0,-5.473999977111816 C1.1030000448226929,-5.473999977111816 1.9980000257492065,-4.578999996185303 1.9980000257492065,-3.4749999046325684 C1.9980000257492065,-2.740000009536743 1.5959999561309814,-2.1040000915527344 1.0049999952316284,-1.7569999694824219 C1.0049999952316284,-1.7569999694824219 1.0049999952316284,0.6290000081062317 1.0049999952316284,0.6290000081062317 C3.2820000648498535,1.0950000286102295 5,3.114000082015991 5,5.5269999504089355 C5,5.5269999504089355 5,7.5269999504089355 5,7.5269999504089355 C5,7.5269999504089355 7,7.5269999504089355 7,7.5269999504089355 C7,7.5269999504089355 7,5.5269999504089355 7,5.5269999504089355 C7,2.7260000705718994 5.3420000076293945,0.3109999895095825 2.9600000381469727,-0.8069999814033508z"></path></g></g></g><g id="l_d_8292" transform="matrix(1,0,0,1,26.000001907348633,25.876001358032227)" opacity="1" style="display: block;"><g id="l_d_8296" opacity="1" transform="matrix(1,0,0,1,19.663000106811523,21.152000427246094)"><path id="l_d_8297" fill="rgb(34,34,34)" fill-opacity="1" d=" M2.9600000381469727,-0.8069999814033508 C3.5989999771118164,-1.5160000324249268 4,-2.444999933242798 4,-3.4730000495910645 C4,-5.678999900817871 2.2060000896453857,-7.4730000495910645 0,-7.4730000495910645 C-2.2060000896453857,-7.4730000495910645 -4,-5.678999900817871 -4,-3.4730000495910645 C-4,-2.444999933242798 -3.5999999046325684,-1.5160000324249268 -2.9609999656677246,-0.8069999814033508 C-5.3429999351501465,0.3109999895095825 -7,2.7260000705718994 -7,5.5269999504089355 C-7,5.5269999504089355 -7,7.5269999504089355 -7,7.5269999504089355 C-7,7.5269999504089355 -5,7.5269999504089355 -5,7.5269999504089355 C-5,7.5269999504089355 -5,5.5269999504089355 -5,5.5269999504089355 C-5,3.1110000610351562 -3.2769999504089355,1.090000033378601 -0.9950000047683716,0.628000020980835 C-0.9950000047683716,0.628000020980835 -0.9950000047683716,-1.7510000467300415 -0.9950000047683716,-1.7510000467300415 C-1.5920000076293945,-2.0969998836517334 -1.9989999532699585,-2.734999895095825 -1.9989999532699585,-3.4749999046325684 C-1.9989999532699585,-4.578999996185303 -1.1039999723434448,-5.473999977111816 0,-5.473999977111816 C1.1030000448226929,-5.473999977111816 1.9980000257492065,-4.578999996185303 1.9980000257492065,-3.4749999046325684 C1.9980000257492065,-2.740000009536743 1.5959999561309814,-2.1040000915527344 1.0049999952316284,-1.7569999694824219 C1.0049999952316284,-1.7569999694824219 1.0049999952316284,0.6290000081062317 1.0049999952316284,0.6290000081062317 C3.2820000648498535,1.0950000286102295 5,3.114000082015991 5,5.5269999504089355 C5,5.5269999504089355 5,7.5269999504089355 5,7.5269999504089355 C5,7.5269999504089355 7,7.5269999504089355 7,7.5269999504089355 C7,7.5269999504089355 7,5.5269999504089355 7,5.5269999504089355 C7,2.7260000705718994 5.3420000076293945,0.3109999895095825 2.9600000381469727,-0.8069999814033508z"></path></g></g></g></g></g></svg>'
    };

    const [selectedItem, setSelectedItem] = useState(null);
    const [stayType, setstayType] = useState(null);
    const handleSubmit = async () => {
        try{
            const res = await api.post('/api/data/listing', {
                stay_type: stayType
            });
            console.log(res);
        }
        catch(error){
            console.log(error);
        }
    }
    const [isMounted, setIsMounted] = useState(false);
    const [animationsDone, setAnimationsDone] = useState(false);

    useEffect(() => {
        const timeoutId = setTimeout(() => setIsMounted(true), 0);
        return () => clearTimeout(timeoutId);
    }, []);

    useEffect(() => {
        if (!isMounted) return;
        const totalMs = 200 + 700; 
        const doneTimer = setTimeout(() => setAnimationsDone(true), totalMs + 100);
        return () => clearTimeout(doneTimer);
    }, [isMounted]);

    useEffect(() => {
        if (!isMounted) return;
        const t = setTimeout(() => setProgress((prev) => Math.max(prev, 18)), 50);
        return () => clearTimeout(t);
    }, [isMounted]);

    const Item = ({ title, subtitle, svg, selected, onClick, reveal, delay = 0, animationsDone }) => (
        <div
            onClick={onClick}
            className={`border rounded-2xl p-5 cursor-pointer transform-gpu will-change-transform ${selected ? 'bg-gray-100 border-gray-400' : 'hover:border-gray-800 border-gray-300'}`}
            style={!reveal ? { opacity: 0, transform: 'translateY(24px) scale(0.98)' } : animationsDone ? { opacity: 1, transform: 'none' } : { animation: 'card-in 700ms cubic-bezier(0.2, 0.8, 0.2, 1) both', animationDelay: `${delay}ms` }}
        >
            <div className="flex items-center justify-between gap-3">
                <div>
                    <div className="text-lg font-semibold">{title}</div>
                    <div className="text-sm text-gray-600 mt-1">{subtitle}</div>
                </div>
                <div className="w-[45px] h-[45px]" dangerouslySetInnerHTML={{ __html: svg }} />
            </div>
        </div>
    );

    return (
        <div className={`min-h-screen bg-white`}>
            <style>{`
            @keyframes card-in {
              0% { opacity: 0; transform: translateY(24px) scale(0.98); }
              100% { opacity: 1; transform: translateY(0) scale(1); }
            }
            `}</style>

            <div className="flex items-center justify-between px-8 py-4">
                <div className="w-8 h-8">
                <svg onClick={() => navigate('/')}
                        className={`w-20 h-6 sm:w-24 sm:h-8 lg:w-28 lg:h-8 transition-all duration-500 ${'scale-100'}`}
                        viewBox="0 0 3490 1080"
                        style={{ display: 'block', color: '#ff385c', cursor: 'pointer' }}
                    >
                        <path d="M1494.71 456.953C1458.28 412.178 1408.46 389.892 1349.68 389.892C1233.51 389.892 1146.18 481.906 1146.18 605.892C1146.18 729.877 1233.51 821.892 1349.68 821.892C1408.46 821.892 1458.28 799.605 1494.71 754.83L1500.95 810.195H1589.84V401.588H1500.95L1494.71 456.953ZM1369.18 736.895C1295.33 736.895 1242.08 683.41 1242.08 605.892C1242.08 528.373 1295.33 474.888 1369.18 474.888C1443.02 474.888 1495.49 529.153 1495.49 605.892C1495.49 682.63 1443.8 736.895 1369.18 736.895ZM1656.11 810.195H1750.46V401.588H1656.11V810.195ZM948.912 666.715C875.618 506.859 795.308 344.664 713.438 184.809C698.623 155.177 670.554 98.2527 645.603 67.8412C609.736 24.1733 556.715 0.779785 502.915 0.779785C449.115 0.779785 396.094 24.1733 360.227 67.8412C335.277 98.2527 307.207 155.177 292.392 184.809C210.522 344.664 130.212 506.859 56.9187 666.715C47.5621 687.769 24.9504 737.675 16.3736 760.289C6.2373 787.581 0.779297 817.213 0.779297 846.845C0.779297 975.509 101.362 1079.22 235.473 1079.22C346.193 1079.22 434.3 1008.26 502.915 934.18C571.53 1008.26 659.638 1079.22 770.357 1079.22C904.468 1079.22 1005.83 975.509 1005.83 846.845C1005.83 817.213 999.593 787.581 989.457 760.289C980.88 737.675 958.268 687.769 948.912 666.715ZM502.915 810.195C447.555 738.455 396.094 649.56 396.094 577.819C396.094 506.079 446.776 470.209 502.915 470.209C559.055 470.209 610.516 508.419 610.516 577.819C610.516 647.22 558.275 738.455 502.915 810.195ZM770.357 998.902C688.362 998.902 618.032 941.557 555.741 872.656C619.966 792.541 690.826 679.121 690.826 577.819C690.826 458.513 598.04 389.892 502.915 389.892C407.79 389.892 315.784 458.513 315.784 577.819C315.784 679.098 386.145 792.478 450.144 872.593C387.845 941.526 317.491 998.902 235.473 998.902C146.586 998.902 81.0898 931.061 81.0898 846.845C81.0898 826.57 84.2087 807.856 91.2261 788.361C98.2436 770.426 120.855 720.52 130.212 701.025C203.505 541.17 282.256 380.534 364.126 220.679C378.941 191.047 403.891 141.921 422.605 119.307C442.877 94.3538 470.947 81.0975 502.915 81.0975C534.883 81.0975 562.953 94.3538 583.226 119.307C601.939 141.921 626.89 191.047 641.704 220.679C723.574 380.534 802.325 541.17 875.618 701.025C884.975 720.52 907.587 770.426 914.604 788.361C921.622 807.856 925.52 826.57 925.52 846.845C925.52 931.061 859.244 998.902 770.357 998.902ZM3285.71 389.892C3226.91 389.892 3175.97 413.098 3139.91 456.953V226.917H3045.56V810.195H3134.45L3140.69 754.83C3177.12 799.605 3226.94 821.892 3285.71 821.892C3401.89 821.892 3489.22 729.877 3489.22 605.892C3489.22 481.906 3401.89 389.892 3285.71 389.892ZM3266.22 736.895C3191.6 736.895 3139.91 682.63 3139.91 605.892C3139.91 529.153 3191.6 474.888 3266.22 474.888C3340.85 474.888 3393.32 528.373 3393.32 605.892C3393.32 683.41 3340.07 736.895 3266.22 736.895ZM2827.24 389.892C2766.15 389.892 2723.56 418.182 2699.37 456.953L2693.13 401.588H2604.24V810.195H2698.59V573.921C2698.59 516.217 2741.47 474.888 2800.73 474.888C2856.87 474.888 2888.84 513.097 2888.84 578.599V810.195H2983.19V566.903C2983.19 457.733 2923.15 389.892 2827.24 389.892ZM1911.86 460.072L1905.62 401.588H1816.73V810.195H1911.08V604.332C1911.08 532.592 1954.74 486.585 2027.26 486.585C2042.85 486.585 2058.44 488.144 2070.92 492.043V401.588C2059.22 396.91 2044.41 395.35 2028.04 395.35C1978.58 395.35 1936.66 421.177 1911.86 460.072ZM2353.96 389.892C2295.15 389.892 2244.21 413.098 2208.15 456.953V226.917H2113.8V810.195H2202.69L2208.93 754.83C2245.36 799.605 2295.18 821.892 2353.96 821.892C2470.13 821.892 2557.46 729.877 2557.46 605.892C2557.46 481.906 2470.13 389.892 2353.96 389.892ZM2334.46 736.895C2259.84 736.895 2208.15 682.63 2208.15 605.892C2208.15 529.153 2259.84 474.888 2334.46 474.888C2409.09 474.888 2461.56 528.373 2461.56 605.892C2461.56 683.41 2408.31 736.895 2334.46 736.895ZM1703.28 226.917C1669.48 226.917 1642.08 254.326 1642.08 288.13C1642.08 321.934 1669.48 349.343 1703.28 349.343C1737.09 349.343 1764.49 321.934 1764.49 288.13C1764.49 254.326 1737.09 226.917 1703.28 226.917Z" fill="currentColor"></path>
                    </svg>
                </div>
                <div className="flex items-center gap-3">
                    <button className="px-4 py-2 text-sm text-gray-800 border border-gray-300 rounded-full hover:bg-gray-100 font-semibold">Questions?</button>
                    <button 
                        className={`px-4 py-2 text-sm text-gray-800 border border-gray-300 rounded-full hover:bg-gray-100 font-semibold transition-colors ${
                            isSaving ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'
                        }`}
                        onClick={onSaveAndExit}
                        disabled={isSaving}
                    >
                        {isSaving ? 'Saving...' : 'Save & exit'}
                    </button>
                </div>
            </div>

            <div className="max-w-[45rem] mx-auto px-6">
                <h1 className="text-4xl font-semibold text-center mt-6 mb-8">What type of place will guests have?</h1>

                <div className="flex flex-col gap-4">
                    {[ 
                        ['An entire place', 'Guests have the whole place to themselves.', svgs.entire, 'entire'],
                        ['A room', 'Guests have their own room in a home, plus access to shared spaces.', svgs.room, 'room'],
                        ['A shared room in a hostel', 'Guests sleep in a shared room in a professionally managed hostel with staff onsite 24/7.', svgs.shared, 'shared'],
                    ].map(([title, subtitle, svg, value], i) => (
                        <Item
                            key={title}
                            title={title}
                            subtitle={subtitle}
                            svg={svg}
                            selected={selectedItem === title}
                            onClick={() => { 
                                setSelectedItem(title); 
                                setstayType(value);
                                if (onPrivacyTypeChange) {
                                    onPrivacyTypeChange(value);
                                }
                            }}
                            reveal={isMounted}
                            delay={i * 50}
                            animationsDone={animationsDone}
                        />
                    ))}
                </div>
            </div>

            <div className="fixed left-0 right-0 bottom-0 bg-white border-t">
                <div className="h-1 w-full bg-gray-300 relative overflow-hidden">
                    <div className="absolute left-0 top-0 h-full bg-black transition-all duration-1000" style={{ width: `${progress}%` }} />
                </div>

                <div className="flex items-center justify-between px-8 py-4">
                    <button onClick={onBack} className="text-gray-800 font-semibold underline">Back</button>
                    <button
                        disabled={!selectedItem || isSaving}
                        aria-disabled={!selectedItem || isSaving}
                        onClick={() => {
                            if (!selectedItem) return;
                            onNext();
                        }}
                        className={`px-8 py-3 rounded-lg transition-colors duration-500 ${selectedItem && !isSaving ? 'bg-black text-white' : 'bg-black/30 text-white/70 cursor-not-allowed'}`}
                    >
                        {isSaving ? 'Saving...' : 'Next'}
                    </button>
                </div>
            </div>
        </div>
    );
}

export default PrivacyType;


